{"version":3,"sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/launcher/lib/index.js"],"names":["ILauncher","Token","LauncherModel","VDomModel","constructor","super","arguments","this","_items","add","options","item","Private","createItem","push","stateChanged","emit","DisposableDelegate","ArrayExt","items","ArrayIterator","Launcher","VDomRenderer","model","_pending","_cwd","cwd","translator","nullTranslator","_trans","load","_callback","callback","_commands","commands","addClass","value","update","render","knownCategories","__","kernelCategories","categories","Object","create","each","index","cat","category","sort","a","b","sortCmp","sections","section","orderedCategories","indexOf","forEach","args","assign","kernel","iconClass","command","_icon","icon","undefined","className","key","LabIcon","classes","stylesheet","toArray","map","launcher","trans","launcherCallback","caption","label","title","onclick","pending","execute","then","Widget","dispose","catch","err","showErrorMessage","_p","onClick","onKeyPress","event","tabIndex","keyProperty","get","kernelIconUrl","src","toUpperCase","Card","id","AttachedProperty","name","rank","Infinity","r1","r2","aLabel","bLabel","localeCompare"],"mappings":"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","file":"8953.7b81907f25cfc2e67196.js","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module launcher\n */\nimport { showErrorMessage, VDomModel, VDomRenderer } from '@jupyterlab/apputils';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { classes, LabIcon } from '@jupyterlab/ui-components';\nimport { ArrayExt, ArrayIterator, each, map, toArray } from '@lumino/algorithm';\nimport { Token } from '@lumino/coreutils';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { AttachedProperty } from '@lumino/properties';\nimport { Widget } from '@lumino/widgets';\nimport * as React from 'react';\n/**\n * The class name added to Launcher instances.\n */\nconst LAUNCHER_CLASS = 'jp-Launcher';\n/* tslint:disable */\n/**\n * The launcher token.\n */\nexport const ILauncher = new Token('@jupyterlab/launcher:ILauncher');\n/**\n * LauncherModel keeps track of the path to working directory and has a list of\n * LauncherItems, which the Launcher will render.\n */\nexport class LauncherModel extends VDomModel {\n    constructor() {\n        super(...arguments);\n        this._items = [];\n    }\n    /**\n     * Add a command item to the launcher, and trigger re-render event for parent\n     * widget.\n     *\n     * @param options - The specification options for a launcher item.\n     *\n     * @returns A disposable that will remove the item from Launcher, and trigger\n     * re-render event for parent widget.\n     *\n     */\n    add(options) {\n        // Create a copy of the options to circumvent mutations to the original.\n        const item = Private.createItem(options);\n        this._items.push(item);\n        this.stateChanged.emit(void 0);\n        return new DisposableDelegate(() => {\n            ArrayExt.removeFirstOf(this._items, item);\n            this.stateChanged.emit(void 0);\n        });\n    }\n    /**\n     * Return an iterator of launcher items.\n     */\n    items() {\n        return new ArrayIterator(this._items);\n    }\n}\n/**\n * A virtual-DOM-based widget for the Launcher.\n */\nexport class Launcher extends VDomRenderer {\n    /**\n     * Construct a new launcher widget.\n     */\n    constructor(options) {\n        super(options.model);\n        this._pending = false;\n        this._cwd = '';\n        this._cwd = options.cwd;\n        this.translator = options.translator || nullTranslator;\n        this._trans = this.translator.load('jupyterlab');\n        this._callback = options.callback;\n        this._commands = options.commands;\n        this.addClass(LAUNCHER_CLASS);\n    }\n    /**\n     * The cwd of the launcher.\n     */\n    get cwd() {\n        return this._cwd;\n    }\n    set cwd(value) {\n        this._cwd = value;\n        this.update();\n    }\n    /**\n     * Whether there is a pending item being launched.\n     */\n    get pending() {\n        return this._pending;\n    }\n    set pending(value) {\n        this._pending = value;\n    }\n    /**\n     * Render the launcher to virtual DOM nodes.\n     */\n    render() {\n        // Bail if there is no model.\n        if (!this.model) {\n            return null;\n        }\n        const knownCategories = [\n            this._trans.__('Notebook'),\n            this._trans.__('Console'),\n            this._trans.__('Other')\n        ];\n        const kernelCategories = [\n            this._trans.__('Notebook'),\n            this._trans.__('Console')\n        ];\n        // First group-by categories\n        const categories = Object.create(null);\n        each(this.model.items(), (item, index) => {\n            const cat = item.category || this._trans.__('Other');\n            if (!(cat in categories)) {\n                categories[cat] = [];\n            }\n            categories[cat].push(item);\n        });\n        // Within each category sort by rank\n        for (const cat in categories) {\n            categories[cat] = categories[cat].sort((a, b) => {\n                return Private.sortCmp(a, b, this._cwd, this._commands);\n            });\n        }\n        // Variable to help create sections\n        const sections = [];\n        let section;\n        // Assemble the final ordered list of categories, beginning with\n        // KNOWN_CATEGORIES.\n        const orderedCategories = [];\n        each(knownCategories, (cat, index) => {\n            orderedCategories.push(cat);\n        });\n        for (const cat in categories) {\n            if (knownCategories.indexOf(cat) === -1) {\n                orderedCategories.push(cat);\n            }\n        }\n        // Now create the sections for each category\n        orderedCategories.forEach(cat => {\n            if (!categories[cat]) {\n                return;\n            }\n            const item = categories[cat][0];\n            const args = Object.assign(Object.assign({}, item.args), { cwd: this.cwd });\n            const kernel = kernelCategories.indexOf(cat) > -1;\n            // DEPRECATED: remove _icon when lumino 2.0 is adopted\n            // if icon is aliasing iconClass, don't use it\n            const iconClass = this._commands.iconClass(item.command, args);\n            const _icon = this._commands.icon(item.command, args);\n            const icon = _icon === iconClass ? undefined : _icon;\n            if (cat in categories) {\n                section = (React.createElement(\"div\", { className: \"jp-Launcher-section\", key: cat },\n                    React.createElement(\"div\", { className: \"jp-Launcher-sectionHeader\" },\n                        React.createElement(LabIcon.resolveReact, { icon: icon, iconClass: classes(iconClass, 'jp-Icon-cover'), stylesheet: \"launcherSection\" }),\n                        React.createElement(\"h2\", { className: \"jp-Launcher-sectionTitle\" }, cat)),\n                    React.createElement(\"div\", { className: \"jp-Launcher-cardContainer\" }, toArray(map(categories[cat], (item) => {\n                        return Card(kernel, item, this, this._commands, this._trans, this._callback);\n                    })))));\n                sections.push(section);\n            }\n        });\n        // Wrap the sections in body and content divs.\n        return (React.createElement(\"div\", { className: \"jp-Launcher-body\" },\n            React.createElement(\"div\", { className: \"jp-Launcher-content\" },\n                React.createElement(\"div\", { className: \"jp-Launcher-cwd\" },\n                    React.createElement(\"h3\", null, this.cwd)),\n                sections)));\n    }\n}\n/**\n * A pure tsx component for a launcher card.\n *\n * @param kernel - whether the item takes uses a kernel.\n *\n * @param item - the launcher item to render.\n *\n * @param launcher - the Launcher instance to which this is added.\n *\n * @param launcherCallback - a callback to call after an item has been launched.\n *\n * @returns a vdom `VirtualElement` for the launcher card.\n */\nfunction Card(kernel, item, launcher, commands, trans, launcherCallback) {\n    // Get some properties of the command\n    const command = item.command;\n    const args = Object.assign(Object.assign({}, item.args), { cwd: launcher.cwd });\n    const caption = commands.caption(command, args);\n    const label = commands.label(command, args);\n    const title = kernel ? label : caption || label;\n    // Build the onclick handler.\n    const onclick = () => {\n        // If an item has already been launched,\n        // don't try to launch another.\n        if (launcher.pending === true) {\n            return;\n        }\n        launcher.pending = true;\n        void commands\n            .execute(command, Object.assign(Object.assign({}, item.args), { cwd: launcher.cwd }))\n            .then(value => {\n            launcher.pending = false;\n            if (value instanceof Widget) {\n                launcherCallback(value);\n                launcher.dispose();\n            }\n        })\n            .catch(err => {\n            launcher.pending = false;\n            void showErrorMessage(trans._p('Error', 'Launcher Error'), err);\n        });\n    };\n    // With tabindex working, you can now pick a kernel by tabbing around and\n    // pressing Enter.\n    const onkeypress = (event) => {\n        if (event.key === 'Enter') {\n            onclick();\n        }\n    };\n    // DEPRECATED: remove _icon when lumino 2.0 is adopted\n    // if icon is aliasing iconClass, don't use it\n    const iconClass = commands.iconClass(command, args);\n    const _icon = commands.icon(command, args);\n    const icon = _icon === iconClass ? undefined : _icon;\n    // Return the VDOM element.\n    return (React.createElement(\"div\", { className: \"jp-LauncherCard\", title: title, onClick: onclick, onKeyPress: onkeypress, tabIndex: 0, \"data-category\": item.category || trans.__('Other'), key: Private.keyProperty.get(item) },\n        React.createElement(\"div\", { className: \"jp-LauncherCard-icon\" }, kernel ? (item.kernelIconUrl ? (React.createElement(\"img\", { src: item.kernelIconUrl, className: \"jp-Launcher-kernelIcon\" })) : (React.createElement(\"div\", { className: \"jp-LauncherCard-noKernelIcon\" }, label[0].toUpperCase()))) : (React.createElement(LabIcon.resolveReact, { icon: icon, iconClass: classes(iconClass, 'jp-Icon-cover'), stylesheet: \"launcherCard\" }))),\n        React.createElement(\"div\", { className: \"jp-LauncherCard-label\", title: title },\n            React.createElement(\"p\", null, label))));\n}\n/**\n * The namespace for module private data.\n */\nvar Private;\n(function (Private) {\n    /**\n     * An incrementing counter for keys.\n     */\n    let id = 0;\n    /**\n     * An attached property for an item's key.\n     */\n    Private.keyProperty = new AttachedProperty({\n        name: 'key',\n        create: () => id++\n    });\n    /**\n     * Create a fully specified item given item options.\n     */\n    function createItem(options) {\n        return Object.assign(Object.assign({}, options), { category: options.category || '', rank: options.rank !== undefined ? options.rank : Infinity });\n    }\n    Private.createItem = createItem;\n    /**\n     * A sort comparison function for a launcher item.\n     */\n    function sortCmp(a, b, cwd, commands) {\n        // First, compare by rank.\n        const r1 = a.rank;\n        const r2 = b.rank;\n        if (r1 !== r2 && r1 !== undefined && r2 !== undefined) {\n            return r1 < r2 ? -1 : 1; // Infinity safe\n        }\n        // Finally, compare by display name.\n        const aLabel = commands.label(a.command, Object.assign(Object.assign({}, a.args), { cwd }));\n        const bLabel = commands.label(b.command, Object.assign(Object.assign({}, b.args), { cwd }));\n        return aLabel.localeCompare(bLabel);\n    }\n    Private.sortCmp = sortCmp;\n})(Private || (Private = {}));\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}